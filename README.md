# QuickJS Tools

A set of tools for developing code which runs in QuickJS.

## Building

### Dependencies

Building QuickJS Tools requires the following build tools:
- A C++ toolchain
- CMake

The following dependencies are used by QuickJS Tools which must also be installed:
- Boost.Program_options

Examples to install these dependencies for macOS and Debian derivatives are provided below:

#### macOS

First, install XCode command line tools with:
```shell
xcode-select --install
```

Then, to install remaining dependencies with [Homebrew](https://brew.sh):
```shell
brew install cmake boost
```

#### Debian and derivatives (Ubuntu, Linux Mint, etc.)

Install dependencies with `apt`:
```shell
apt install build-essential cmake libboost-program-options-dev
```

### Build

To build this project, use `CMake`:
```shell
cmake -B build
cmake --build build --config Release
```

Add the `-j` argument to run multiple compilation jobs in parallel;
for example, `cmake --build build --config Release -j 4` will run 4 jobs in parallel.

Built executables will be available in the `build/` folder.

# Tools

For more information, all tools support the `-h`/`--help` flag for help.

## QuickJS Interrupt Explorer

This tool facilitates exploring interruption points within JS code,
and allows for easy simulation of interruptions.

**Notes:**
- Interruption point indexing starts at zero

**Example Usage:**

```shell
# Run the file test.js and list the total number of interruption points
quickjs_interrupt_explorer -f test.js

# Same as above, but in addition log whenever an interruption point is reached
quickjs_interrupt_explorer -f test.js -v

# Run test.js and interrupt the second interruption point (NOTE: interruption indexing starts at 0)
quickjs_interrupt_explorer -f test.js -i 1

# Run test.js, then call the function named foo twice and interrupt at the 3rd interruption point to test recovery from interruption
quickjs_interrupt_explorer -f test.js -c foo -c foo -i 2
```

## QuickJS Disassembler

This tool prints the QuickJS generated bytecode for a file.

**Notes:**
- Endianness of integers is determined by the endianness of your system

**Example Usage:**

```shell
# Log the bytecode generated for the file test.js
quickjs_disassembler -f test.js
```
